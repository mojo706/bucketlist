machine:
  python:
    version: 3.6.1

  environment:
    FLASK_APP: run.py
    FLASK_CONFIG: development
    DATABASE_URL: postgresql://localhost/bucketlist_api


dependencies:
  post:
    - pip install -r requirements.txt

test:
  override:
    - createdb bucketlist_api;
    - createdb test_db;
    - rm -rf migrations
    - python manage.py db init
    - python manage.py db migrate
    - python manage.py db upgrade
    - nosetests -v